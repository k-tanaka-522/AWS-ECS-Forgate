# 企画書

> AWS Multi-Account Sample Application
> Transit Gatewayによる拠点間閉域接続を実現する技術検証・社内デモ用サンプル

---

## 1. ドキュメント情報

| 項目 | 内容 |
|------|------|
| プロジェクト名 | AWS Multi-Account Sample Application |
| 文書バージョン | 1.0 |
| 作成日 | 2025-10-21 |
| 最終更新日 | 2025-10-21 |
| 承認状態 | 承認済み |
| 承認者 | - |

---

## 2. プロジェクト概要

### 2.1 プロジェクト名
**AWS Multi-Account Sample Application**

### 2.2 プロジェクトの目的
AWS Multi-Account構成とTransit Gatewayによる拠点間閉域接続の技術検証を目的とした、社内向け技術デモ・PoC用のリファレンスアーキテクチャを構築する。

---

## 3. 背景と課題

### 3.1 ビジネス背景

**業界・業態:**
- Technology/IT業界
- AWSインフラ技術の社内技術蓄積・検証

**現状:**
- AWS Multi-Account構成の実装パターンが社内に蓄積されていない
- Transit Gatewayによる拠点間閉域接続の実装経験が不足している
- CloudFormationによるInfrastructure as Codeのベストプラクティスが確立されていない
- アプリケーションとインフラの統合的なサンプル実装が存在しない

### 3.2 解決したい課題

1. **技術的課題**
   - Transit Gatewayによる拠点間閉域接続の実装方法が不明確
   - Multi-Account構成（Platform Account + Service Account）の設計パターンが未確立
   - CloudFormationネストスタック構成のベストプラクティスが不明確
   - 3サービス構成（Public/Admin/Batch）の実装パターンが未確立

2. **運用的課題**
   - CloudWatch統合監視の実装パターンが未確立
   - マルチAZ構成の具体的な実装方法が不明確
   - インフラとアプリケーションの統合的な管理方法が未確立

3. **組織的課題**
   - 社内向け技術デモ・PoC用のリファレンス実装が不足
   - 技術検証結果の共有・蓄積の仕組みが不十分

---

## 4. プロジェクトゴール

### 4.1 プロジェクトの成功基準

| ゴール | 測定指標 | 目標値 |
|--------|---------|--------|
| Transit Gateway技術検証 | 拠点間通信レイテンシ | 50ms以内 |
| Multi-Account構成検証 | アカウント分離による管理性 | Platform/Service分離実現 |
| 3サービス構成検証 | サービス別デプロイ可能性 | 独立デプロイ実現 |
| CloudFormation実装パターン確立 | スタック分割による保守性 | 4スタック構成実現（Network/Database/Compute/Monitoring） |
| CloudWatch監視パターン確立 | 統合監視ダッシュボード | 全リソース可視化実現 |

### 4.2 期待される成果物

1. **Infrastructure as Code**
   - Platform Account CloudFormationテンプレート（ネストスタック構成）
   - Service Account CloudFormationテンプレート（スタック分割構成）
   - デプロイスクリプト・パラメータファイル

2. **アプリケーション**
   - Node.js 20ベースのサンプルアプリケーション（モノレポ構成）
   - 3サービス（Public Web App / Admin Dashboard / Batch Processing）
   - Dockerfileおよびコンテナ設定

3. **ドキュメント**
   - アーキテクチャ設計書
   - 構築手順書
   - 運用手順書

4. **監視設定**
   - CloudWatch Alarmsサンプル設定
   - CloudWatch Dashboard設定
   - SNS通知設定

---

## 5. ステークホルダー

### 5.1 関係者

| 役割 | 氏名/組織 | 責任範囲 | 関与レベル |
|------|----------|----------|-----------|
| プロジェクトオーナー | 社内技術部門 | 技術検証方針決定 | 高 |
| 開発者 | - | 設計・実装 | 高 |
| レビュアー | 社内エンジニア | 技術レビュー | 中 |
| 利用者 | 社内エンジニア | 技術デモ・学習 | 中 |

### 5.2 意思決定者
- プロジェクトオーナー: 技術検証方針・優先順位決定

---

## 6. スコープ

### 6.1 対象範囲（Included）

**Platform Account:**
- Shared VPC構築
- Transit Gateway構築
- Client VPN構築
- 共有サービス基盤

**Service Account:**
- App VPC構築
- 3サービス構成実装
  - Public Web App（一般ユーザー向け、インターネット公開）
  - Admin Dashboard（管理者向け、VPN/Direct Connect経由）
  - Batch Processing（データ処理・集計）
- RDS PostgreSQL（Multi-AZ）
- Application Load Balancer
- ECS Fargate

**監視:**
- CloudWatch Alarms（ECS/RDS/ALB）
- CloudWatch Dashboard統合ビュー
- SNS通知設定

**アプリケーション:**
- Node.js 20サンプルアプリケーション
- モノレポ構成（npm workspaces）
- Dockerコンテナ化

### 6.2 対象外範囲（Excluded）

- 本番運用レベルのセキュリティ対策（検証・デモ用のため簡易実装）
- 高度なCI/CDパイプライン（基本的なデプロイフローのみ）
- マルチリージョン構成
- DR（災害対策）環境
- WAF/Shield等の高度なセキュリティサービス
- 詳細なコスト最適化

---

## 7. 主要機能

### 7.1 機能一覧

| ID | 機能名 | 説明 | 優先度 |
|----|--------|------|--------|
| F-001 | Platform Account共通基盤 | Shared VPC、Transit Gateway、Client VPN | 高 |
| F-002 | Service Account基盤 | App VPC、3サービス構成 | 高 |
| F-003 | Public Webアプリ | 一般ユーザー向けWebアプリケーション | 高 |
| F-004 | Admin Dashboard | 管理者向けダッシュボード（VPN経由） | 中 |
| F-005 | Batch Processing | データ処理・集計バッチ | 中 |
| F-006 | 統合監視 | CloudWatch Alarms + Dashboard | 高 |
| F-007 | データベース | RDS PostgreSQL（Multi-AZ） | 高 |

### 7.2 技術スタック

**Infrastructure:**
- AWS CloudFormation（ネストスタック構成）
- AWS Multi-Account（Platform + Service）
- AWS Transit Gateway
- AWS Client VPN
- ECS Fargate
- RDS PostgreSQL
- Application Load Balancer
- CloudWatch

**Application:**
- Node.js 20
- npm workspaces（モノレポ）
- Docker

---

## 8. ビジネス価値とKPI

### 8.1 ビジネス価値

1. **技術蓄積の加速**
   - Transit Gateway実装パターンの確立
   - Multi-Account構成のベストプラクティスの確立
   - CloudFormation実装パターンの確立

2. **品質向上**
   - Infrastructure as Codeによる再現性の確保
   - 標準化されたアーキテクチャパターンの確立

3. **開発効率向上**
   - リファレンス実装による学習コスト削減
   - テンプレートの再利用による開発期間短縮

### 8.2 KPI

| KPI | 現状値 | 目標値 | 測定時期 | 測定方法 |
|-----|--------|--------|----------|----------|
| インフラ構築時間 | 未測定 | 30分以内 | 実装完了時 | CloudFormationデプロイ時間測定 |
| ネットワークレイテンシ | 未測定 | 50ms以内 | 検証時 | Transit Gateway経由の通信測定 |
| 監視アラート検知時間 | 未測定 | 5分以内 | 検証時 | CloudWatch Alarms動作確認 |
| コード再利用性 | 未測定 | 80%以上 | レビュー時 | モジュール化率測定 |

---

## 9. スケジュール

### 9.1 マイルストーン

| マイルストーン | 期日 | 成果物 | 状態 |
|-------------|------|--------|------|
| 企画フェーズ完了 | 2025-10-20 | 企画書 | 完了 |
| 要件定義完了 | 2025-10-20 | 要件定義書 | 完了 |
| 基本設計完了 | 2025-10-20 | 基本設計書 | 完了 |
| 詳細設計完了 | 2025-10-20 | 詳細設計書 | 完了 |
| インフラ実装完了 | 2025-10-20 | CloudFormationテンプレート | 完了（一部） |
| アプリケーション実装完了 | 未定 | Node.jsアプリケーション | 未着手 |
| 監視設定完了 | 未定 | CloudWatch設定 | 未着手 |
| CI/CD実装完了 | 未定 | GitHub Actions | 未着手 |
| 統合テスト完了 | 未定 | テスト結果 | 未着手 |
| プロジェクト完了 | 未定 | 全成果物 | 進行中 |

### 9.2 フェーズ別計画

**フェーズ1: 企画・要件定義・設計（完了）**
- 企画書作成
- 要件定義書作成
- 基本設計書作成
- 詳細設計書作成

**フェーズ2: インフラ実装（一部完了）**
- Platform Account実装（完了）
- Service Account実装（一部完了）

**フェーズ3: アプリケーション実装（未着手）**
- モノレポ構成セットアップ
- 3サービス実装

**フェーズ4: 監視・CI/CD実装（未着手）**
- CloudWatch監視設定
- GitHub Actions CI/CD実装

**フェーズ5: テスト・検証（未着手）**
- 統合テスト
- 性能検証
- セキュリティ検証

---

## 10. 制約条件

### 10.1 技術的制約
- CloudFormationを使用（Terraform/CDKは対象外）
- ap-northeast-1リージョンのみ
- Node.js 20を使用
- ECS Fargateを使用（EC2は使用しない）

### 10.2 リソース制約
- 予算: 技術検証・デモ用のため最小限
- 期間: 未定（PoC性質のため柔軟）
- 人員: 1名

### 10.3 組織的制約
- 社内技術検証用途のため、本番運用レベルのセキュリティは不要
- 技術デモ・学習用途のため、完璧な実装よりも理解しやすさを優先

---

## 11. リスクと対応策

### 11.1 技術リスク

| リスク | 影響度 | 発生確率 | 対応策 |
|--------|--------|----------|--------|
| Transit Gateway設定の複雑性 | 中 | 中 | AWS公式ドキュメント参照、段階的実装 |
| CloudFormationスタック依存関係 | 中 | 中 | Cross-Stack References活用、慎重な設計 |
| Multi-Account構成の複雑性 | 中 | 低 | 段階的実装、十分なテスト |
| コスト超過 | 低 | 低 | リソース最小構成、不要時停止 |

### 11.2 スケジュールリスク

| リスク | 影響度 | 発生確率 | 対応策 |
|--------|--------|----------|--------|
| 優先順位の変更 | 低 | 中 | PoC性質のため柔軟に対応 |
| 技術調査時間の増加 | 中 | 中 | 段階的実装、MVP優先 |

---

## 12. 承認

| 承認者 | 役職 | 承認日 | 署名 |
|--------|------|--------|------|
| - | プロジェクトオーナー | 2025-10-21 | - |

---

## 変更履歴

| バージョン | 日付 | 変更内容 | 変更者 |
|----------|------|---------|--------|
| 1.0 | 2025-10-21 | 初版作成（要件定義書から逆算） | - |

---

**備考:**
- 本企画書は、既存の要件定義書・設計書・実装コードから逆算して作成されました
- プロジェクト状態を正確に反映するため、完了済み項目も記載しています
