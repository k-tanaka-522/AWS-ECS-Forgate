# インテグレーションテスト仕様書

> AWS Multi-Account Sample Application

---

## 1. テスト概要

### 1.1 目的
API、データベース連携が正しく動作することを確認する。

### 1.2 対象
- User API
- Product API
- Order API
- Database連携

### 1.3 テストツール
- **Supertest** (Node.js)
- **Jest**

---

## 2. テストケース

### 2.1 User API

| No | エンドポイント | メソッド | 期待ステータス | 確認内容 |
|----|--------------|---------|--------------|---------|
| 1 | /api/users | POST | 201 | ユーザー作成 |
| 2 | /api/users/:id | GET | 200 | ユーザー取得 |
| 3 | /api/users/:id | PUT | 200 | ユーザー更新 |
| 4 | /api/users/:id | DELETE | 204 | ユーザー削除 |
| 5 | /api/users/invalid | GET | 404 | 存在しないID |

### 2.2 Product API

| No | エンドポイント | メソッド | 期待ステータス | 確認内容 |
|----|--------------|---------|--------------|---------|
| 1 | /api/products | GET | 200 | 商品一覧取得 |
| 2 | /api/products | POST | 201 | 商品作成 |
| 3 | /api/products/:id | GET | 200 | 商品詳細取得 |
| 4 | /api/products/:id | PUT | 200 | 商品更新 |

### 2.3 Order API

| No | エンドポイント | メソッド | 期待ステータス | 確認内容 |
|----|--------------|---------|--------------|---------|
| 1 | /api/orders | POST | 201 | 注文作成 |
| 2 | /api/orders/:id | GET | 200 | 注文詳細取得 |
| 3 | /api/orders/user/:userId | GET | 200 | ユーザー別注文取得 |
| 4 | /api/orders/:id/status | PUT | 200 | ステータス更新 |

---

## 3. 実行方法

```bash
# 統合テスト実行
npm run test:integration

# 特定APIのみ
npm test users.api.test.ts
```

---

## 変更履歴

| 日付 | 版数 | 変更内容 |
|------|------|----------|
| 2025-10-22 | 1.0 | 初版作成 |
