# 単体テスト仕様書

> AWS Multi-Account Sample Application

---

## 1. テスト概要

### 1.1 目的
個別の関数・メソッドが正しく動作することを確認する。

### 1.2 対象
- User Service
- Product Service
- Order Service
- Batch Jobs

### 1.3 テストフレームワーク
- **Jest** (TypeScript/JavaScript)
- **カバレッジ目標**: 70%以上

---

## 2. テストケース

### 2.1 User Service

| No | テスト項目 | 入力 | 期待結果 |
|----|----------|------|---------|
| 1 | ユーザー作成（正常） | 正常なユーザーデータ | ユーザーが作成される |
| 2 | ユーザー作成（重複メール） | 既存のメールアドレス | エラーが返される |
| 3 | ユーザー検索（ID） | 有効なユーザーID | ユーザーが返される |
| 4 | ユーザー検索（存在しない） | 無効なID | nullが返される |
| 5 | メールアドレス検索 | 有効なメール | ユーザーが返される |

### 2.2 Product Service

| No | テスト項目 | 入力 | 期待結果 |
|----|----------|------|---------|
| 1 | 商品作成（正常） | 正常な商品データ | 商品が作成される |
| 2 | 商品価格（負の値） | price: -100 | エラーが返される |
| 3 | 在庫更新 | quantity: 50 | 在庫が更新される |
| 4 | 在庫不足チェック | stock < 10 | 該当商品リストが返される |

### 2.3 Order Service

| No | テスト項目 | 入力 | 期待結果 |
|----|----------|------|---------|
| 1 | 注文作成（正常） | 正常な注文データ | 注文が作成される |
| 2 | 注文ステータス更新 | status: completed | ステータスが更新される |
| 3 | ユーザー別注文取得 | userId | ユーザーの注文リストが返される |
| 4 | 合計金額計算 | 注文明細 | 正しい合計金額が計算される |

---

## 3. 実行方法

```bash
# 全テスト実行
npm test

# カバレッジ付き実行
npm run test:coverage

# 特定ファイルのみ
npm test user.service.test.ts
```

---

## 変更履歴

| 日付 | 版数 | 変更内容 |
|------|------|----------|
| 2025-10-22 | 1.0 | 初版作成 |
