# 01. システム概要

> AWS Multi-Account Sample Application - 基本設計書

[← 目次に戻る](00_目次.md) | [次へ: アーキテクチャ設計 →](02_アーキテクチャ設計.md)

---

## 1. システム目的

### 1.1 目的

AWS Multi-Account構成とTransit Gatewayによる拠点間閉域接続の技術検証・社内デモ用リファレンスアーキテクチャを構築する。

### 1.2 目標

- Transit Gateway活用パターンの確立
- Multi-Account構成のベストプラクティス検証
- CloudFormationによるIaCベストプラクティス確立
- 3サービス構成（Public/Admin/Batch）の実装パターン確立

---

## 2. システム機能概要

| 機能ID | 機能名 | 概要 |
|--------|--------|------|
| F-001 | Platform Account基盤 | Shared VPC、Transit Gateway、Client VPN |
| F-002 | Service Account基盤 | Service VPC、RDS、ECS、ALB |
| F-003 | Public Webアプリ | 一般ユーザー向けWebアプリケーション |
| F-004 | Admin Dashboard | 管理者向けダッシュボード（VPN経由のみ） |
| F-005 | Batch Processing | データ処理・集計バッチ |
| F-006 | CloudWatch統合監視 | Alarms + Dashboard |

---

## 3. 対象ユーザー

| ユーザー種別 | 説明 | アクセス方法 |
|------------|------|------------|
| 一般ユーザー | Public Webアプリを利用 | インターネット経由（HTTPS） |
| 管理者 | Admin Dashboardで管理操作 | Client VPN経由 |
| システム | Batch Processing自動実行 | ECS Scheduled Task |

---

## 4. システム全体像

### 4.1 アカウント構成

```
┌─────────────────────────────────────────────────────────────┐
│                      Platform Account                        │
│  ┌────────────────────────────────────────────────────────┐ │
│  │ Shared VPC (10.0.0.0/16)                               │ │
│  │  - Client VPN Endpoint                                 │ │
│  │  - Transit Gateway (Hub)                               │ │
│  └────────────────────────────────────────────────────────┘ │
└───────────────────────────┬─────────────────────────────────┘
                            │ Transit Gateway
┌───────────────────────────┴─────────────────────────────────┐
│                      Service Account                         │
│  ┌────────────────────────────────────────────────────────┐ │
│  │ Service VPC (10.1.0.0/16)                              │ │
│  │  - Public Web App (ECS Fargate + ALB)                  │ │
│  │  - Admin Dashboard (ECS Fargate + ALB, VPN経由のみ)    │ │
│  │  - Batch Processing (ECS Fargate Scheduled Task)       │ │
│  │  - RDS PostgreSQL (Multi-AZ)                           │ │
│  └────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 責務分離

| Account | 責務 | 管理対象 |
|---------|------|---------|
| **Platform Account** | 共通ネットワーク基盤 | Transit Gateway、Client VPN、Shared VPC |
| **Service Account** | アプリケーション基盤 | ECS Fargate、RDS、ALB、CloudWatch |

---

## 5. プロジェクト固有の特性

### 5.1 検証・デモ用という位置づけ

本プロジェクトは**技術検証・社内デモ用**のため、以下の特性があります：

| 項目 | 設定 | 本番化時の対応案 |
|------|------|----------------|
| **認証** | なし or Basic認証（検討中） | AWS Cognito + MFA |
| **規模** | 最小構成（0.5 vCPU、1GB Memory） | 要件に応じてスペック変更 |
| **監視** | 基本的なCloudWatch Alarms | 詳細メトリクス、カスタムメトリクス |
| **コスト** | 最小化優先 | パフォーマンス優先 |
| **障害復旧** | RTO 30分、RPO 24時間 | より厳格な目標設定 |

### 5.2 本番化への拡張性

検証用だが、本番化を見据えた設計：

- Multi-Account構成で将来的な拡張容易
- IaC（CloudFormation）で環境複製容易
- Multi-AZ構成で高可用性確保
- Secrets Managerで安全なシークレット管理

---

## 6. システムの制約事項

### 6.1 技術制約

| 項目 | 制約内容 | 理由 |
|------|---------|------|
| **IaCツール** | CloudFormation必須（Terraform不可） | 要件定義で指定 |
| **リージョン** | ap-northeast-1（東京）のみ | 検証用、単一リージョン |
| **データベース** | RDS PostgreSQL | 要件定義で指定 |
| **アプリケーション** | Node.js 20 | 要件定義で指定 |

### 6.2 運用制約

| 項目 | 制約内容 |
|------|---------|
| **デプロイ** | Change Sets（dry-run）必須 |
| **監視** | CloudWatchのみ使用 |
| **バックアップ** | RDS自動バックアップ（7日保持） |

---

## 7. 次のステップ

本ドキュメントでシステム全体像を把握したら、次は技術的なアプローチを理解します。

**次のドキュメント**: [02_アーキテクチャ設計.md](02_アーキテクチャ設計.md)

---

**ドキュメントナビゲーション**:
- [← 目次に戻る](00_目次.md)
- [次へ: アーキテクチャ設計 →](02_アーキテクチャ設計.md)
